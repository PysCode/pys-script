<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pys 单词助手</title>
<style>
* {
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  user-select: none;
  -webkit-user-drag: none;
}

body {
font-family: Arial, sans-serif;
background-color: #f9f9f9;
color: #333;
margin: 0;
padding: 0;
display: flex;
justify-content: center;
align-items: flex-start;
min-height: 100vh;
}
.container {
width: 90%;
margin: 10px auto;
padding: 20px;
background-color: #fff;
box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
border-radius: 8px;
position: relative;
}
.search-bar {
display: flex;
align-items: center;
margin-bottom: 20px;
}
.toggle-sidebar {
padding: 10px;
font-size: 16px;
border: none;
border-radius: 4px;
background-color: #333;
color: #fff;
cursor: pointer;
outline: none;
margin-right: 10px;
z-index: 101;
}
.search-bar input[type="text"] {
width: calc(100% - 40px);
padding: 15px;
font-size: 14px;
border: 1px solid #ddd;
border-radius: 4px;
outline: none;
background-color: #f9f9f9;
z-index: 101;
}
.search-results {
top: -120%;
position: absolute;
width: 92%;
max-height: 350px;
overflow-y: auto;
background-color: #fff;
border: 1px solid #ddd;
border-radius: 4px;
box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
z-index: 100;
transition: top 0.5s ease;
}
.search-results.active {
top: 80px;
}
.search-results ul {
list-style-type: none;
padding: 0;
margin: 0;
}
.search-results ul li {
padding: 10px;
border-bottom: 1px solid #eee;
cursor: pointer;
display: flex;
justify-content: space-between;
align-items: center;
}
.search-results ul li:last-child {
border-bottom: none;
}
.search-results ul li:hover {
background-color: #f0f0f0;
}
.bold {
font-weight: bold;
}
.no-results {
padding: 10px;
text-align: center;
color: #888;
}
        .copy-btn {
            position: absolute;
            top: 5px;
            right: 40px;
            color: white ;
display: block;
background-color: #333;
border: 1px solid #ddd;
border-radius: 4px;
padding: 7px;
font-weight: 5000;
min-width:60px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: all 0.3s ease;
        }
        
        .copy-btn:hover {
            background-color: #555;
            transform: scale(1.05);
        }
        
        .copy-btn.copied {
            background-color: #2196F3;
        }
        
        .copy-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        #word {
            margin: 0;
            padding-right: 80px; /* 为按钮留出空间 */
        }
        
        /* 复制图标 */
        .copy-icon::before {
            content: "⎘复制";
        }
        
        .copy-btn.copied .copy-icon::before {
            content: "保存啦";
text-align: center;
        }

.word-display {
display: block;
margin-top: 20px;
padding: 15px;
background-color: #f9f9f9;
border: 1px solid #ddd;
border-radius: 4px;
position: relative;
}
.word-display h2 {
margin: 0 0 10px;
}
.word-display p {
margin: 5px 0;
color: #555;
}
.word-display .favorite {
position: absolute;
top: 5px;
right: 5px;
padding: 5px;
font-size: 16px;
border: none;
border-radius: 4px;
background-color: #333;
color: #fff;
cursor: pointer;
}
.sidebar {
position: fixed;
top: 0;
left: -250px;
width: 250px;
height: 100vh;
background-color: #333;
color: white;
padding: 15px;
box-sizing: border-box;
transition: left 0.3s ease;
z-index: 1000;
overflow-y: auto;
}
.sidebar.active {
left: 0;
}
.sidebar h3 {
margin: 0 0 10px;
}
.sidebar ul {
list-style-type: none;
padding: 0;
max-height: 180px;
overflow-y: auto;
}
.sidebar ul li {
margin: 10px 0;
}
.sidebar ul li a {
color: white;
text-decoration: none;
}
.sidebar ul li a:hover {
text-decoration: underline;
}
.overlay {
position: fixed;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.5);
z-index: 999;
transition: left 0.6s ease;
}
.overlay.active {
left: 0;
}
.favorites-list {
list-style-type: none;
padding: 0;
}
.favorites-list li {
display: flex;
justify-content: space-between;
align-items: center;
padding: 8px;
border-bottom: 1px solid #444;
}
.favorites-list li:last-child {
border-bottom: none;
}
.favorites-list li span {
color: #888;
}
.favorites-list li button {
background-color: #555;
color: white;
border: none;
border-radius: 4px;
padding: 5px;
font-size: 14px;
cursor: pointer;
}
.history-list {
list-style-type: none;
padding: 0;
}
.history-list li {
display: flex;
justify-content: space-between;
align-items: center;
padding: 8px;
border-bottom: 1px solid #444;
}
.history-list li:last-child {
border-bottom: none;
}
.history-list li span {
color: #888;
}
.history-list li button {
background-color: #555;
color: white;
border: none;
border-radius: 4px;
padding: 5px;
font-size: 18px;
cursor: pointer;
}
.game-display {
display: block;
margin-top: 20px;
padding: 15px;
background-color: #f9f9f9;
border: 1px solid #ddd;
border-radius: 4px;
}
.game-display .poem {
color: #555;
font-size: 15px;
margin-bottom: 10px;
}
.game-display .question {
font-size: 18px;
margin-bottom: 15px;
}
.game-display .options {
margin-bottom: 15px;
}
.game-display .option {
display: block;
margin-bottom: 10px;
padding: 10px;
background-color: #ddd;
border: none;
cursor: pointer;
width: 100%;
text-align: left;
}
.game-display .option:hover {
background-color: #ccc;
}
.game-display .result {
font-size: 16px;
margin-bottom: 15px;
}
.game-display .submit-button {
background-color: #ddd;
color: #333;
padding: 10px 20px;
border: none;
cursor: pointer;
}
.game-display .submit-button:hover {
background-color: #ccc;
}
.game-display .footer {
text-align: center;
margin-top: 20px;
color: #333;
font-size: 14px;
}
.about-overlay, .note-overlay, .phonetic-overlay, .updates-overlay, .learn-overlay, .favorites-overlay, .settings-overlay {
display: block;
position: fixed;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background-color: #fff;
z-index: 1001;
transition: left 0.6s ease;
}
.about-overlay.active, .note-overlay.active, .phonetic-overlay.active, .updates-overlay.active, .learn-overlay.active, .favorites-overlay.active, .settings-overlay.active {
left: 0;
}
.about-overlay .close-button, .note-overlay .close-button, .phonetic-overlay .close-button, .updates-overlay .close-button, .learn-overlay .close-button, .favorites-overlay .close-button, .settings-overlay .close-button {
position: absolute;
top: 10px;
left: 10px;
font-size: 24px;
cursor: pointer;
}
.about-overlay .about-content, .note-overlay .note-content, .phonetic-overlay .phonetic-content, .updates-overlay .updates-content, .learn-overlay .learn-content, .favorites-overlay .favorites-content, .settings-overlay .settings-content {
padding: 10px;
text-align: center;
}
.about-content, .note-content, .phonetic-content, .updates-content, .learn-content, .favorites-content, .settings-content {
font-weight: 300;
}
.title-display {
text-align: center;
font-size: 25px;
font-weight: 100;
margin-bottom: 15px;
}
.date-left,
.date-right {
opacity: 0;
transform: translateX(-100%);
transition: transform 0.3s ease-out, opacity 0.3s ease-out;
}
.date-right {
transform: translateX(100%);
}
.date-left.animate-in,
.date-right.animate-in {
opacity: 1;
transform: translateX(0);
}
.splash-screen {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: #fff;
display: flex;
flex-direction: column;
align-items: center;
justify-content: flex-start;
z-index: 1002;
transition: left 0.5s ease;
}
.splash-screen.active {
left: -100%;
}
.date-container {
display: flex;
align-items: center;
margin-top: 70px;
font-size: 3.3em;
}
.date-left {
transform: translateX(-100%);
margin-right: 10px;
padding-right: 30px;
}
.date-right {
transform: translateX(100%);
padding-left: 20px;
}
.date-divider {
transform: translateX(10px);
width: 2px;
height: 120px;
background-color: black;
margin: 0 20px;
}
.week {
font-size: 0.3em;
text-align: right;
}
.month {
font-size: 2em;
}
.day {
font-size: 1.5em;
}
.year {
font-size: 0.5em;
}
.word-container {
text-align: left;
padding: 50px;
margin-top: 100px;
margin-left: 0px;
}
.word {
font-size: 3em;
font-weight: bold;
}
.definition {
margin-top: 10px;
margin-bottom: 30px;
font-size: 0.9em;
}
.example {
margin-top: 10px;
font-size: 1em;
}
.switch {
position: relative;
display: inline-block;
width: 63px;
height: 30px;
}
.switch input {
opacity: 0;
width: 0;
height: 0;
}
.slider {
position: absolute;
cursor: pointer;
top: 0;
left: 0;
right: 0;
bottom: 0;
background-color: #ccc;
transition: .4s;
border-radius: 32px;
}
.slider:before {
position: absolute;
content: "";
height: 22px;
width: 22px;
left: 4px;
bottom: 4px;
background-color: white;
transition: .4s;
border-radius: 50%;
}
input:checked + .slider {
background-color: #90EE90;
}
input:focus + .slider {
box-shadow: 0 0 1px #90EE90;
}
input:checked + .slider:before {
transform: translateX(22px);
}
.splash-toggle-container {
display: flex;
align-items: center;
justify-content: space-between;
margin-top: 10px;
}
.splash-toggle-container span {
margin-right: 10px;
}
.splash-toggle-title {
font-size: 20px;
font-weight: bold;
}
.container-help {
transform: translateY(-20px);
width: 90%;
height: calc(80vh);
margin: 20px auto;
padding: 20px;
background-color: #fff;
box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
border-radius: 8px;
position: relative;
overflow: auto;
}
h1-help {
text-align: center;
font-size: 28px;
font-weight: 300;
margin-bottom: 20px;
color: #4a4a4a;
}
.section-help {
margin-bottom: 30px;
}
.section-help h2-help {
font-size: 22px;
font-weight: 500;
margin-bottom: 10px;
color: #2c3e50;
}
.section-help p-help {
font-size: 14px;
line-height: 1.6;
color: #7f8c8d;
}
.section-help ol-help, .section-help ul-help {
font-size: 14px;
line-height: 1.6;
margin-left: 20px;
color: #7f8c8d;
}
.section-help li-help {
margin-bottom: 5px;
}
.section-help pre-help {
background-color: #ecf0f1;
border: 1px solid #bdc3c7;
border-radius: 4px;
padding: 10px;
font-size: 12px;
overflow-x: auto;
}
.section-help pre-help code-help {
font-family: 'Courier New', Courier, monospace;
color: #2c3e50;
}
table {
border-radius: 8px;
}
.phonetic-table {
width: 100%;
border-collapse: collapse;
margin-top: 20px;
}
.phonetic-table th, .phonetic-table td {
border: 1px solid #ddd;
padding: 8px;
text-align: left;
}
.phonetic-table th {
background-color: #f2f2f2;
font-weight: bold;
}
.phonetic-table tr:nth-child(even) {
background-color: #f9f9f9;
}
.phonetic-table tr:hover {
background-color: #f1f1f1;
}
.updates-list {
text-align: left;
max-width: 600px;
margin: 0 auto;
padding: 20px;
}
.updates-list h3 {
color: #333;
border-bottom: 1px solid #eee;
padding-bottom: 5px;
margin-top: 20px;
}
.updates-list p {
margin: 8px 0;
font-size: 14px;
color: #555;
}
/* ========== 夜间模式完整补丁（追加） ========== */

/* 0. 仅颜色过渡，不影响位置动画 */
body,
.container,
.search-bar input[type="text"],
.search-results,
.search-results ul li,
.word-display,
.game-display,
.game-display .option,
.game-display .submit-button,
.sidebar,
.overlay,
.phonetic-table th,
.phonetic-table td,
.updates-list h3,
.updates-list p,
.section-help h2-help,
.section-help p-help,
.section-help ol-help,
.section-help ul-help {
transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
/* 夜间模式：学习区导航栏深色 */
body.dark-mode .learn-nav {
background-color: #111;
border-bottom-color: #444;
border-left-color: #444;
}

/* 夜间模式：学习区导航栏文字颜色 */
body.dark-mode .learn-nav-item {
color: #e8e8e8;
}

/* 夜间模式：学习区导航栏激活项下划线 */
body.dark-mode .learn-nav-item.active {
color: #66b3ff;
}
body.dark-mode .learn-nav-item.active::after {
background-color: #66b3ff;
}

/* 夜间模式：字母表表头深色 */
body.dark-mode .letter-table th {
background-color: #2a2a2a;
color: #e8e8e8;
border-color: #444;
}
/* 夜间模式：更新日志浅色文字 */
body.dark-mode .updates-content,
body.dark-mode .updates-list h3,
body.dark-mode .updates-list p {
color: #e8e8e8 !important;
}

/* 1. 夜间配色：深色背景 + 极浅文字 + 深线条 */
body.dark-mode {
background-color: #121212;
color: #e8e8e8;
}
body.dark-mode .container,
body.dark-mode .search-results,
body.dark-mode .word-display,
body.dark-mode .game-display,
body.dark-mode .container-help,
body.dark-mode .about-overlay,
body.dark-mode .note-overlay,
body.dark-mode .phonetic-overlay,
body.dark-mode .updates-overlay,
body.dark-mode .learn-overlay,
body.dark-mode .favorites-overlay,
body.dark-mode .settings-overlay {
background-color: #1e1e1e;
color: #e8e8e8;
border-color: #666;
}
body.dark-mode .search-bar input[type="text"] {
background-color: #2a2a2a;
color: #e8e8e8;
border-color: #666;
}
body.dark-mode .search-results ul li {
border-bottom-color: #666;
}
body.dark-mode .sidebar {
background-color: #111;
color: #e8e8e8;
}
body.dark-mode .sidebar ul li {
border-bottom-color: #666;
}
body.dark-mode .phonetic-table th,
body.dark-mode .phonetic-table td {
border-color: #666;
}
/* 答题按钮夜间适配 */
body.dark-mode .game-display .option,
body.dark-mode .game-display .submit-button {
background-color: #333;
color: #e8e8e8;
}
/* 夜间模式：诗句高亮 */
body.dark-mode .game-display .poem {
color: #e8e8e8 !important;
}

/* 夜间模式：页脚高亮 */
body.dark-mode .game-display .footer {
color: #e8e8e8 !important;
}

body.dark-mode .game-display .option:hover,
body.dark-mode .game-display .submit-button:hover {
background-color: #444;
}
/* 夜间模式：单词详情区所有段落文字高亮 */
body.dark-mode #word-display p{
color: #d0d0d0 !important;   /* 高亮浅色文字 */
}
body.dark-mode #derivative-word span{
color: #d0d0d0 !important;   /* 高亮浅色文字 */
}

/* 2. 强制保留原版动画优先级 */
.search-results {
transition: top 0.5s ease !important;
}
.sidebar,
.overlay {
transition: left 0.3s ease !important;
}
.overlay {
transition: left 0.6s ease !important;
}
/* 开屏动画夜间适配 */
body.dark-mode .splash-screen {
background-color: #121212;
color: #e8e8e8;
}
/* 开屏动画竖线夜间变浅 */
body.dark-mode .date-divider {
background-color: #999;
}
/* 夜间模式下音标表格统一深色配色 */
body.dark-mode .phonetic-table {
border-color: #444;                 /* 外框 */
}

body.dark-mode .phonetic-table thead {
background-color: #2a2a2a;          /* 表头最深 */
}

body.dark-mode .phonetic-table tbody tr:nth-child(odd) {
background-color: #1e1e1e;          /* 奇行 */
}

body.dark-mode .phonetic-table tbody tr:nth-child(even) {
background-color: #222;             /* 偶行再深一点 */
}

body.dark-mode .phonetic-table th,
body.dark-mode .phonetic-table td {
border-color: #444;                 /* 单元格线条 */
color: #e8e8e8;                     /* 文字浅色 */
}

body.dark-mode .phonetic-table tr:hover {
background-color: #333;             /* 悬停高亮 */
}


/* 仅给指定的三个 h3 后面加白色小 > */
#sidebar h3#learn-button,
#sidebar h3#note-button,
#sidebar h3#about-button {
position: relative;
padding-right: 22px;   /* 给图标留空 */
}

#sidebar h3#learn-button::after,
#sidebar h3#note-button::after,
#sidebar h3#about-button::after {
content: '';
position: absolute;
right: 6px;
top: 50%;
transform: translateY(-50%);
width: 14px;
height: 14px;
background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 3l5 5-5 5'/%3E%3C/svg%3E")
no-repeat center/contain;
opacity: 0.8;
transition: opacity 0.2s;
}

#sidebar h3:hover::after { opacity: 1; }

/* 确保收藏/历史记录标题及列表不出现图标 */
#sidebar h3:not(#learn-button):not(#note-button):not(#settings-button):not(#about-button)::after,
#sidebar ul::before,
#sidebar ul li::after {
display: none !important;
}
body.dark-mode .phonetic-table thead,
body.dark-mode .phonetic-table th {
background-color: #111 !important;
}

/* ======== 新增样式：学习区导航栏与内容区（已按要求修改） ======== */
/* 1. 学习区整体滑入滑出（纵向） */
.learn-overlay {
display: block;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: #fff;
z-index: 1001;
transition: transform 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
transform: translateY(-110%);
}
.learn-overlay.active {
transform: translateY(0);
}

/* 2. 导航栏始终固定在顶部 */
.learn-nav {
position: fixed;
top: 0;
left: 50px;
right: 0;
height: 50px;
background: #fff;
border-bottom: 1px solid #ddd;
border-left: 1px solid #ddd;
display: flex;
align-items: center;
overflow-x: auto;
white-space: nowrap;
z-index: 10;
}

/* 3. 内容区域：先快后慢平滑滚动 0.3s */
.learn-content-wrapper {
margin-top: 60px;
padding: 20px;
max-height: calc(100vh - 110px);
overflow-y: auto;
scroll-behavior: smooth;
scroll-snap-type: y mandatory;            /* 可选：增强滚动体验 */
}

.section {
scroll-snap-align: start;                 /* 可选：确保对齐 */
min-height: 100vh;
padding-top: 20px;
}

/* 4. 导航栏项目高亮 */
.learn-nav-item {
padding: 0 20px;
font-size: 16px;
height: 100%;
display: inline-flex;
align-items: center;
justify-content: center;
cursor: pointer;
position: relative;
transition: background 0.2s;
}
.learn-nav-item.active {
font-weight: bold;
color: #007bff;
}
.learn-nav-item.active::after {
content: '';
position: absolute;
left: 50%;
bottom: 0;
width: 30px;
height: 3px;
background: #007bff;
border-radius: 2px;
transform: translateX(-50%);
}

/* 5. 字母表 & 音标表样式（保持不变） */
.letter-table,
.phonetic-table {
width: 100%;
border-collapse: collapse;
margin-top: 10px;
}
.letter-table th,
.letter-table td,
.phonetic-table th,
.phonetic-table td {
border: 1px solid #ddd;
padding: 8px;
text-align: left;
}
.letter-table th,
.phonetic-table th {
background-color: #f2f2f2;
}
/* 夜间模式：帮助区域浅色文字 */
body.dark-mode .note-content,
body.dark-mode .section-help h2-help,
body.dark-mode .section-help p-help,
body.dark-mode .section-help ol-help,
body.dark-mode .section-help ul-help,
body.dark-mode .section-help li-help,
body.dark-mode .section-help pre-help,
body.dark-mode .section-help pre-help code-help,
body.dark-mode .container-help h1-help {
color: #e8e8e8 !important;
}
/* 夜间模式：帮助区域标题颜色 */
body.dark-mode h1-help,
body.dark-mode h2-help {
color: #e8e8e8 !important;
}


/* 夜间模式：帮助区块背景与边框 */
body.dark-mode .container-help,
body.dark-mode .note-overlay {
background-color: #1e1e1e;
border-color: #444;
}

/* ======== 每日单词区域 ======== */
.daily-word-display {
display: block;
margin-top: 20px;
padding: 15px;
background-color: #f9f9f9;
border: 1px solid #ddd;
border-radius: 4px;
position: relative;
}
.daily-word-display h2 {
margin: 0 0 10px;
}
.daily-word-display .daily-favorite {
position: absolute;
top: 5px;
right: 5px;
padding: 5px;
font-size: 16px;
border: none;
border-radius: 4px;
background-color: #333;
color: #fff;
cursor: pointer;
}
.daily-word-content {
display: flex;
align-items: center;
justify-content: space-between;
}
.daily-word-left {
flex: 1;
}
.daily-word-right {
flex: 2;
padding-left: 20px;
color: #666;
font-size: 14px;
}
.daily-word-right p {
margin: 3px 0;
}
.daily-example {
margin-top: 10px;
font-size: 14px;
color: #555;
font-style: italic;
}

/* ======== 收藏卡片区域 ======== */
.favorites-cards {
display: flex;
flex-wrap: wrap;
gap: 15px;
padding: 20px;
justify-content: center;
}
.favorite-card {
background-color: #fff;
border: 1px solid #ddd;
border-radius: 8px;
padding: 15px;
width: 250px;
box-shadow: 0 2px 5px rgba(0,0,0,0.1);
position: relative;
}
.favorite-card .card-favorite-btn {
position: absolute;
top: 5px;
right: 5px;
background: none;
border: none;
font-size: 18px;
cursor: pointer;
color: #333;
}
.favorite-card h3 {
margin: 0 0 8px;
font-size: 18px;
}
.favorite-card .card-pronunciation {
font-size: 14px;
color: #666;
margin: 3px 0;
}
.favorite-card .card-part-of-speech {
font-size: 14px;
color: #666;
margin: 3px 0;
}
.favorite-card .card-interpretation {
font-size: 14px;
color: #333;
margin: 5px 0;
}
.favorite-card .card-example {
font-size: 13px;
color: #555;
font-style: italic;
margin-top: 8px;
}

/* ======== 设置区域 ======== */
.settings-content {
padding: 20px;
}
.settings-item {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 20px;
}
.settings-item span {
font-size: 16px;
}

/* ===== 夜间模式：每日单词卡片 ===== */
body.dark-mode .daily-word-display {
background-color: #1e1e1e;
border-color: #444;
}
body.dark-mode .daily-word-right,
body.dark-mode .daily-example {
color: #b0b0b0 !important;
}

/* ===== 夜间模式：收藏卡片 ===== */
body.dark-mode .favorite-card {
background-color: #1e1e1e;
border-color: #444;
}
body.dark-mode .favorite-card .card-pronunciation,
body.dark-mode .favorite-card .card-part-of-speech,
body.dark-mode .favorite-card .card-interpretation,
body.dark-mode .favorite-card .card-example {
color: #d0d0d0 !important;
}
body.dark-mode .favorite-card .card-favorite-btn {
color: #e8e8e8;
}
/* 给“设置”右侧加白色小箭头 */
#sidebar h3#settings-button {
position: relative;
padding-right: 22px;          /* 给图标留空 */
}
#sidebar h3#settings-button::after {
content: '';
position: absolute;
right: 6px;
top: 50%;
transform: translateY(-50%);
width: 14px;
height: 14px;
background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 3l5 5-5 5'/%3E%3C/svg%3E") no-repeat center/contain;
opacity: 0.8;
transition: opacity 0.2s;
}
#sidebar h3#settings-button:hover::after { opacity: 1; }

/* ===== 设置页专用开关 ===== */
.set-switch {
position: relative;
display: inline-block;
width: 54px;               /* 比默认稍小 */
height: 28px;
}
.set-switch input {
opacity: 0;
width: 0;
height: 0;
}
.set-slider {
position: absolute;
cursor: pointer;
top: 0;
left: 0;
right: 0;
bottom: 0;
background-color: #ccc;
transition: .4s;
border-radius: 28px;
}
.set-slider:before {
position: absolute;
content: "";
height: 20px;
width: 20px;
left: 4px;
bottom: 4px;
background-color: white;
transition: .4s;
border-radius: 50%;
}
input:checked + .set-slider {
background-color: #66b3ff;   /* 设置页专属高亮色 */
}
input:focus + .set-slider {
box-shadow: 0 0 1px #66b3ff;
}
input:checked + .set-slider:before {
transform: translateX(26px);
}

/* 夜间模式 */
body.dark-mode .set-slider { background-color: #555; }
body.dark-mode input:checked + .set-slider { background-color: #4da6ff; }

</style>
</head>
<body>
<!-- 开屏页面 -->
<div class="splash-screen" id="splash-screen">
<div class="date-container">
<div class="date-left">
<div class="month" id="month"></div>
<div class="week" id="week"></div>
</div>
<div class="date-divider"></div>
<div class="date-right">
<div class="year" id="year"></div>
<div class="day" id="day"></div>
</div>
</div>
<div class="word-container" id="splash-word-container">
<div class="word" id="splash-word"></div>
<div class="definition" id="splash-definition"></div>
<div class="example" id="splash-example"></div>
</div>
</div>

<!-- 主页面内容 -->
<div class="container" id="main-container">
<div class="search-bar">
<button class="toggle-sidebar" id="toggle-sidebar">☰</button>
<input type="text" id="search-input" placeholder="请输入搜索内容">
</div>
<div class="search-results" id="search-results">
<ul>
<!-- 搜索结果列表 -->
</ul>
<div class="no-results" id="no-results" style="display: none;">· 暂无相关词汇 ·</div>
</div>

<div class="word-display" id="word-display">
        <button class="copy-btn" onclick="copyWordContent()" title="复制">
            <span class="copy-icon"></span>
            <span class="btn-text"></span>
        </button>
<button class="favorite" id="favorite-button">☆</button>
<h2 id="word">-</h2>
<p id="pronunciation">音标: /-/</p>
<p id="part-of-speech">词性: -</p>
<p id="interpretation">释义: -</p>
<p id="example">例句: -</p>
<p id="derivative">衍生词: <span id="derivative-word" style="color: #333; cursor: pointer;">-</span></p>
</div>

<!-- 每日单词 -->
<div class="daily-word-display" id="daily-word-display">
<button class="daily-favorite" id="daily-favorite-button">☆</button>
<div class="daily-word-content">
<div class="daily-word-left">
<h2 id="daily-word">-</h2>
</div>
<div class="daily-word-right">
<p id="daily-pronunciation">音标: /-/</p>
<p id="daily-interpretation">释义: -</p>
</div>
</div>
<div class="daily-example" id="daily-example">例句: -</div>
</div>

<div class="game-display" id="game-display">
<div class="title-display">-= 卡片配对 =-</div>
<div class="poem" id="poem">书山有路勤为径，学海无涯苦作舟</div>
<div class="question" id="question"></div>
<div class="options" id="options"></div>
<div class="result" id="result"></div>
<button class="submit-button" onclick="checkAnswer()">提交答案</button>
<div class="footer">· 学如春起之苗 不见其增 日有所长 ·</div>
</div>
</div>
<div class="sidebar" id="sidebar">
<h3 id="favorites-title">收藏</h3>
<ul class="favorites-list" id="favorites-list">
<!-- 收藏列表 -->
</ul>
<h3>历史记录</h3>
<ul class="history-list" id="history-list">
<!-- 历史记录列表 -->
</ul>

<div class="splash-toggle-container">
<span class="splash-toggle-title">夜间模式</span>
<label class="switch">
<input type="checkbox" id="dark-mode-toggle">
<span class="slider"></span>
</label>
</div>
<div class="splash-toggle-container">
<span class="splash-toggle-title">开屏动画</span>
<label class="switch">
<input type="checkbox" id="splash-toggle">
<span class="slider"></span>
</label>
</div>
<br>
<h3 id="settings-button">设置</h3>
<h3 id="learn-button">学习</h3>
<h3 id="note-button">帮助</h3>
<h3 id="about-button">关于</h3>
</div>
<div class="overlay" id="overlay"></div>
<div class="about-overlay" id="about-overlay">
<div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 20px;">
<div class="close-button" id="close-about">◁</div>
<button id="view-updates" style="background: #333; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; font-size: 14px;text-align: right;position: absolute;top: 10px;right: 10px;">更新内容</button>
</div>
<div class="about-content">
<h2 class="about-content">关于 KimiPys 单词助手</h2>
<p class="about-content" id="about-con">V1.0.0</p><br>
<p class="about-content">这是一个能够帮助你学习单词的纯净简约工具。</p>
</div>
</div>
<div class="note-overlay" id="note-overlay">
<div class="close-button" id="close-note">◁</div>
<div class="note-content">
<h1-help>KimiPys 单词助手使用说明</h1-help>
<p class="note-content">
<div class="container-help">
<div class="section-help">
<h2-help>1. 使用搜索功能</h2-help>
<ol-help>
<li-help>在页面顶部的搜索框中输入单词或释义。例如，输入“a”或“字母表中的字母”。</li-help>
<li-help>搜索结果会实时显示在搜索框下方的列表中，点击回车键 如果有相符单词 则直接显示该内容。如果没有找到匹配的单词，会显示“暂无相关词汇”。如果搜索框为空，会显示历史记录中的最近搜索内容。</li-help>
<li-help>点击搜索结果中的单词，查看该单词的详细信息。</li-help>
</ol-help>
</div>

<div class="section-help">
<h2-help>2. 查看单词详细信息</h2-help>
<ol-help>
<li-help>在搜索结果中点击一个单词，单词的详细信息会显示在页面中间的“单词显示”区域，可点击右上角复制或收藏该单词</li-help>
<li-help>单词详细信息包括：
<ul-help>
<li-help>音标：单词的音标。</li-help>
<li-help>词性：单词的词性。</li-help>
<li-help>释义：单词的释义。</li-help>
<li-help>例句：单词的例句，如果有多个例句，会换行显示。</li-help>
<li-help>衍生词：单词的衍生词，点击衍生词可以跳转到该衍生词的详细信息。</li-help>
</ul-help>
</li-help>
<li-help>如果需要收藏该单词，点击“收藏”按钮（☆）。收藏的单词会出现在侧边栏的“收藏”列表中。如果单词已经收藏，按钮会显示为“★”。</li-help>
</ol-help>
</div>

<div class="section-help">
<h2-help>3. 查看收藏和历史记录</h2-help>
<ol-help>
<li-help>查看收藏列表：
<ul-help>
<li-help>点击侧边栏中的“收藏”按钮，可以查看所有收藏的单词。</li-help>
<li-help>在收藏列表中点击单词，可以直接跳转到该单词的详细信息。</li-help>
<li-help>如果需要移除收藏的单词，点击单词旁边的“—”按钮。</li-help>
</ul-help>
</li-help>
<li-help>查看历史记录：
<ul-help>
<li-help>点击侧边栏中的“历史记录”按钮，可以查看最近搜索过的单词。</li-help>
<li-help>在历史记录中点击单词，可以直接跳转到该单词的详细信息。</li-help>
<li-help>如果需要移除历史记录中的单词，点击单词旁边的“—”按钮。</li-help>
</ul-help>
</li-help>
</ol-help>
</div>

<div class="section-help">
<h2-help>4. 查看关于页面</h2-help>
<ol-help>
<li-help>点击侧边栏中的“关于”按钮，会弹出一个白色的区域，显示软件的介绍信息。</li-help>
<li-help>关于页面会显示软件的版本号、功能介绍等信息。</li-help>
<li-help>点击关于区域左上角的关闭按钮（◁），可以关闭关于页面。</li-help>
</ol-help>
</div>

<div class="section-help">
<h2-help>5. 使用单词游戏</h2-help>
<ol-help>
<li-help>查看题目：
<ul-help>
<li-help>在页面中间的“单词游戏”区域，会显示一个单词的释义选择题。</li-help>
<li-help>题目格式为：“第X题：单词的释义是？”</li-help>
</ul-help>
</li-help>
<li-help>选择答案：
<ul-help>
<li-help>选择一个选项后，点击“提交答案”按钮。</li-help>
</ul-help>
</li-help>
<li-help>查看结果：
<ul-help>
<li-help>如果答案正确，会显示“✓ 正确！”并高亮显示正确选项。</li-help>
<li-help>如果答案错误，会显示“✗ 错误！正确答案是：正确答案”并高亮显示正确选项。</li-help>
<li-help>错误的题目会被记录下来，下次游戏会优先复习这些错题。</li-help>
</ul-help>
</li-help>
</ol-help>
</div>

<div class="section-help">
<h2-help>6. 控制开屏动画</h2-help>
<ol-help>
<li-help>找到开关：
<ul-help>
<li-help>在侧边栏中找到“开屏动画”开关。</li-help>
</ul-help>
</li-help>
<li-help>打开或关闭开屏动画：
<ul-help>
<li-help>如果想在下次打开页面时显示开屏动画，确保开关处于打开状态（绿色）。</li-help>
<li-help>如果不想显示开屏动画，将开关切换到关闭状态（灰色）。</li-help>
</ul-help>
</li-help>
</ol-help>
</div>

<div class="section-help">
<h2-help>7. 使用范围与限制</h2-help>
<ol-help>
<li-help>本软件是一款离线查单词工具，仅供个人使用。用户不得将软件用于商业用途或其他未经授权的场景。</li-help>
<li-help>软件未设置账号登录功能，所有数据均存储于用户设备本地，不会上传至任何服务器或第三方平台。</li-help>
<li-help>用户在使用过程中应确保软件的纯净性，不得安装或使用任何可能篡改软件功能的插件或附加组件。</li-help>
<li-help>软件方不提供任何形式的在线服务，用户应自行负责软件的安装、更新和维护。</li-help>
</ol-help>
</div>

<div class="section-help">
<h2-help>8. 用户数据保护</h2-help>
<ol-help>
<li-help>本软件不会收集用户的任何个人信息，包括但不限于姓名、联系方式、使用习惯等。所有数据均存储在用户设备本地，软件方无法访问或获取。</li-help>
<li-help>用户在使用过程中输入的单词、查询历史等数据，仅用于软件的本地功能实现，不会被用于任何其他目的。</li-help>
<li-help>软件方不会通过软件向用户推送任何形式的广告或商业信息。</li-help>
<li-help>用户有权随时删除本地存储的数据，软件方不会对此进行干预。</li-help>
</ol-help>
</div>

<div class="section-help">
<h2-help>9. 软件更新与技术支持</h2-help>
<ol-help>
<li-help>软件方会不定期发布更新版本，以修复已知问题、优化功能或增加新内容。用户应定期检查更新，以确保软件的正常使用。</li-help>
<li-help>由于软件为离线版，用户在使用过程中遇到问题时，可通过软件内置的帮助文档或官方网站获取技术支持信息。</li-help>
<li-help>软件方不保证软件的无间断运行，但会尽力确保软件的稳定性和兼容性。</li-help>
<li-help>用户在使用过程中发现的任何问题或建议，可通过软件提供的反馈渠道向软件方提出。</li-help>
</ol-help>
</div>

<div class="section-help">
<h2-help>10. 禁止行为与法律责任</h2-help>
<ol-help>
<li-help>用户不得对软件进行反向工程、解码、修改或破解，否则将承担相应的法律责任。</li-help>
<li-help>用户不得利用软件进行任何形式的非法活动，包括但不限于侵犯他人版权、传播非法内容等。</li-help>
<li-help>用户不得将软件用于任何可能损害软件方或第三方利益的行为。</li-help>
<li-help>如用户违反上述条款，软件方有权终止用户的使用权限，并保留追究法律责任的权利。</li-help>
</ol-help>
</div>

<div class="section-help">
<h2-help>11. 免责声明</h2-help>
<ol-help>
<li-help>软件方不保证软件的无间断运行或完全无错误。用户在使用过程中遇到的任何问题，软件方不承担任何责任。</li-help>
<li-help>软件方不保证软件中的单词释义、例句等内容的绝对准确性。用户应自行对查询结果进行判断和核实。</li-help>
<li-help>用户在使用软件过程中，因自身操作不当或设备故障等原因导致的数据丢失或损坏，软件方不承担任何责任。</li-help>
<li-help>软件方对因不可抗力或其他不可预见因素导致的用户损失不承担任何责任。</li-help>
</ol-help>
</div>
</div>
</div>
</p>
</div>
</div>

<!-- 学习区 -->
<div class="learn-overlay" id="learn-overlay">
<div class="close-button" id="close-learn">△</div>
<div class="learn-nav" id="learn-nav">
<div class="learn-nav-item active" data-target="alphabet">字母表</div>
<div class="learn-nav-item" data-target="phonetics">音标表</div>
<div class="learn-nav-item" data-target="grammar">语法</div>
<div class="learn-nav-item" data-target="pronunciat">语音规则</div>
</div>
<div class="learn-content-wrapper">
<!-- 字母表 -->
<div class="section" id="alphabet">
<h2>字母表</h2>
<p>下面表格展示了本方案中使用的字母与拉丁字母对照、及标准写法和简写方案。<br>标明解释：注释*为借字，注释'为舍弃字母</p>
<table class="letter-table">
<thead>
<tr>
<th>拉丁字母</th>
<th>标准写法</th>
<th>简写方案</th>
</tr>
</thead>
<tbody>
<tr><td>a</td><td>a</td><td>a</td></tr>
<tr><td>b</td><td>b</td><td>b</td></tr>
<tr><td>c</td><td>g</td><td>c</td></tr>
<tr><td>ĉ</td><td>ĝ</td><td>g</td></tr>
<tr><td>d</td><td>d τ</td><td>d</td></tr>
<tr><td>e</td><td>e</td><td>e</td></tr>
<tr><td>f</td><td>f</td><td>f</td></tr>
<tr><td>g</td><td>ʐ ǵ</td><td>g</td></tr>
<tr><td>h</td><td>j̄ j* h</td><td>h j</td></tr>
<tr><td>i</td><td>i é</td><td>i é</td></tr>
<tr><td>j</td><td>и̂ б</td><td>j</td></tr>
<tr><td>k</td><td>m̃ k c</td><td>c k</td></tr>
<tr><td>l</td><td>l ʜ</td><td>l</td></tr>
<tr><td>m</td><td>m м'</td><td>m</td></tr>
<tr><td>n</td><td>n</td><td>n</td></tr>
<tr><td>o</td><td>o</td><td>o</td></tr>
<tr><td>p</td><td>p</td><td>p</td></tr>
<tr><td>q</td><td>q</td><td>q</td></tr>
<tr><td>r</td><td>r г</td><td>r</td></tr>
<tr><td>s</td><td>s a</td><td>s</td></tr>
<tr><td>sh</td><td>â α</td><td>ss</td></tr>
<tr><td>t</td><td>t</td><td>t</td></tr>
<tr><td>u</td><td>u</td><td>u</td></tr>
<tr><td>v</td><td>v</td><td>v</td></tr>
<tr><td>w</td><td>w т</td><td>w u</td></tr>
<tr><td>y</td><td>y</td><td>y</td></tr>
<tr><td>z</td><td>и</td><td>z</td></tr>
<tr><td>ang</td><td>ā</td><td>ā</td></tr>
<tr><td>eng</td><td>ē</td><td>ē</td></tr>
<tr><td>ong</td><td>ō</td><td>ō</td></tr>
<tr><td>ei</td><td>ê</td><td>e</td></tr>
<tr><td>ie</td><td>ë</td><td>e</td></tr>
</tbody>
</table>
<br><br><br><br><br><br>
</div>
<!-- 音标表 -->
<div class="section" id="phonetics">
<h2>音标学习</h2>
<p>学习派印斯(Pyinse)的 PSA 方案与国际音标(IPA)的发音和书写方式的对照表。</p>
<table class="phonetic-table">
<thead>
<tr>
<th>音标 PSA</th>
<th>类型</th>
<th>发音 IPA</th>
</tr>
</thead>
<tbody>
<tr><td>/a/</td><td>元音</td><td>/a/</td></tr>
<tr><td>/b/</td><td>辅音</td><td>/b/</td></tr>
<tr><td>/c/</td><td>辅音</td><td>/tsʰ/</td></tr>
<tr><td>/d/</td><td>辅音</td><td>/t/</td></tr>
<tr><td>/e/</td><td>元音</td><td>/ɤ/</td></tr>
<tr><td>/f/</td><td>辅音</td><td>/f/</td></tr>
<tr><td>/g/</td><td>辅音</td><td>/k/</td></tr>
<tr><td>/h/</td><td>辅音</td><td>/x/</td></tr>
<tr><td>/i/</td><td>元音</td><td>/i/</td></tr>
<tr><td>/j/</td><td>辅音</td><td>/tɕ/</td></tr>
<tr><td>/k/</td><td>辅音</td><td>/kʰ/</td></tr>
<tr><td>/l/</td><td>辅音</td><td>/l/</td></tr>
<tr><td>/m/</td><td>辅音</td><td>/m/</td></tr>
<tr><td>/n/</td><td>辅音</td><td>/n/</td></tr>
<tr><td>/o/</td><td>元音</td><td>/o/</td></tr>
<tr><td>/p/</td><td>辅音</td><td>/pʰ/</td></tr>
<tr><td>/q/</td><td>辅音</td><td>/tɕʰ/</td></tr>
<tr><td>/r/</td><td>辅音</td><td>/ʐ/</td></tr>
<tr><td>/s/</td><td>辅音</td><td>/s/</td></tr>
<tr><td>/t/</td><td>辅音</td><td>/tʰ/</td></tr>
<tr><td>/u/</td><td>元音</td><td>/u/</td></tr>
<tr><td>/v/</td><td>辅音</td><td>/v/</td></tr>
<tr><td>/w/</td><td>辅音</td><td>/w/</td></tr>
<tr><td>/x/</td><td>辅音</td><td>/ɕ/</td></tr>
<tr><td>/y/</td><td>元音</td><td>/j/</td></tr>
<tr><td>/z/</td><td>辅音</td><td>/ts/</td></tr>
<tr><td>/th/</td><td>辅音</td><td>/θ/</td></tr>
<tr><td>/Α/</td><td>辅音</td><td>/ei/</td></tr>
<tr><td>/ü/</td><td>辅音</td><td>/y/</td></tr>
<tr><td>□ʰ</td><td>上标符号</td><td>送气符</td></tr>
<tr><td>ˈ□</td><td>修饰符号</td><td>主重音</td></tr>
<tr><td>ˌ□</td><td>修饰符号</td><td>次重音</td></tr>
<tr><td>ː</td><td>修饰符号</td><td>长音</td></tr>
<tr><td>‿</td><td>修饰符号</td><td>连音</td></tr>
<tr><td>□</td><td>修饰符号</td><td>音节分隔</td></tr>
</tbody>
</table>
<br><br><br><br><br><br>
</div>
<!-- 语法 -->
<div class="section" id="grammar">
<h2>语法</h2>
<p>一、单词构成</p>
<p>
单词构成基本都是由词根和若干个词缀（前后）拼合而成(用单引号'，此处称“单词连接符”、“连字符”或“连接符”)。前词缀基本是声明作用，声明词性、时地点、词义正反。后缀基本是再次深层地说明细节<br>
单词中字母的发音有些是存在多个发音，详情见主页面单词音标。<br>
具体的词组如下：<br><br>
1. 前词缀(部分)<br>
(1)a :时地点，可以将时间地点放在其后面。<br>
(2)ad :表“正在”，现在正在做的。<br>
(3)at :表“当”也可写成 atom，即“在…的时候”。<br>
(4)bin :表“所”，指所说的、所做的、说听的、所见的等等，类似“sba”用法。<br>
(5)bum :表“没”、“没有”和“除了”（衍伸含义），比例上比较缓和，偏主观。<br>
(6)ne :表“不”，严格只表示“不”，对动词的否定，或词义反义，语义上比较强硬。<br>
(7)so :动词性，可以将词性特殊改成动词或强调声明词性为动词。<br>
</p>
<p>
2.后词缀(部分)<br>
(1)ap :表在…之上。<br>
(2)appo :表在…之前。<br>
(3)don :表在…之下。<br>
(4)dona :表在…之后。<br>
(5)hoh: 表在…之外。<br>
(6)in :表在…之中；…里面。<br>
(7)sum :表名词。<br>
(8)técol :表动词。<br>
</p>
<p>二、句子构成</p>
<p>以下根据时态，来分成几个句子组成方案</p>
<p>
1. 现在时<br>
(1)一般现在时<br>
主语(S) + 谓语(V)<br>
主语(S) + 谓语(V) + 宾语(O)<br>
(2)现在进行时<br>
主语(S) + ad +谓语(V) + 宾语(O)<br>
(3)现在完成时<br>
主语(S) + (ja) + 谓语(V) +'en + 宾语(O)<br><br>
2.过去时<br>
主语(S) + 谓语(V) + 'en + 宾语(O)<br><br>
3.将来时<br>
主语(S) + va + 谓语(V) + 宾语(O)<br>
</p>
<br><br><br><br><br><br>
</div>
<!-- 语音规则 -->
<div class="section" id="pronunciat">
<h2>语音规则</h2>
<p>
·  每一个字母并不是只有一个音, 大部分的还是需要根据上面的上标符号，上标符号跟固定组合和自由组合，也就是有的符号和字母相组合时，只有一个固定发音，它是一个固定组合；而有的符号则可以与其他字母自由组合。将这个字母改变其发音（比如浊化、清读、改变声调等）。
</p>
<p>
·  当类似于“ā ē ō ī” 上面为“-”上标符号出现时, 即为鼻音发音，类似于“ang eng ong ing” ，其属于自由组合。<br>
·  当有上标符为波浪时, 发音与这个字母的本身发音相反，但是这个符号不常用，其属于自由组合。
</p>
<p>
·  其余详情请见字母表发音，大部分字母遵循拉丁字母发音规则，通常建议当做固定组合记忆。
</p>
</div>

</div>
</div>

<!-- 更新内容页面 -->
<div class="updates-overlay" id="updates-overlay">
<div class="close-button" id="close-updates">◁</div>
<div class="updates-content">
<h2 class="updates-content">更新日志</h2>
<div class="container-help">
<div class="updates-list" id="updates-list">
<!-- 更新内容将通过JS填充 -->
</div>
</div>
</div>
</div>

<!-- 收藏卡片页面 -->
<div class="favorites-overlay" id="favorites-overlay">
<div class="close-button" id="close-favorites">◁</div>
<div class="favorites-content">
<h2 class="favorites-content">单词收藏</h2>
<div class="container-help">
<div class="favorites-cards" id="favorites-cards">
<!-- 收藏卡片将通过JS填充 -->
</div>
</div>
</div>
</div>

<!-- 设置页面 -->
<div class="settings-overlay" id="settings-overlay">
<div class="close-button" id="close-settings">◁</div>
<div class="settings-content">
<h2 class="settings-content">软件设置</h2>
<div class="settings-item">
<span>显示卡片配对栏</span>
<label class="set-switch">
<input type="checkbox" id="show-game-toggle">
<span class="set-slider"></span>
</label>
</div>
<div class="settings-item">
<span>显示每日单词栏</span>
<label class="set-switch">
<input type="checkbox" id="show-daily-toggle">
<span class="set-slider"></span>
</label>
</div>
</div>
</div>

<script>
const searchInput = document.getElementById('search-input');
const searchResults = document.getElementById('search-results');
const noResults = document.getElementById('no-results');
const wordDisplay = document.getElementById('word-display');
const favoriteButton = document.getElementById('favorite-button');
const favoritesList = document.getElementById('favorites-list');
const historyList = document.getElementById('history-list');
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');
const gameDisplay = document.getElementById('game-display');
const toggleSidebar = document.getElementById('toggle-sidebar');
const aboutButton = document.getElementById('about-button');
const noteButton = document.getElementById('note-button');
const phoneticButton = document.getElementById('phonetic-button');
const aboutOverlay = document.getElementById('about-overlay');
const aboutCon = document.getElementById('about-con');
const closeAbout = document.getElementById('close-about');
const noteOverlay = document.getElementById('note-overlay');
const closeNote = document.getElementById('close-note');
const phoneticOverlay = document.getElementById('phonetic-overlay');
const closePhonetic = document.getElementById('close-phonetic');
const splashScreen = document.getElementById('splash-screen');
const splashWord = document.getElementById('splash-word');
const splashDefinition = document.getElementById('splash-definition');
const splashExample = document.getElementById('splash-example');
const monthElement = document.getElementById('month');
const weekElement = document.getElementById('week');
const yearElement = document.getElementById('year');
const dayElement = document.getElementById('day');
const splashToggle = document.getElementById('splash-toggle');

// 更新内容数据
const Updated_Context = [
{ date: "2025.7.12", content: "修复已知问题" },
{ date: "2025.7.15", content: "增加音标学习功能" },
{ date: "2025.7.19", content: "添加更新日志页面" },
{ date: "2025.7.26", content: "添加夜间模式功能" },
{ date: "2025.1.08", content: "将单词整理后重写" },
{ date: "2025.1.09", content: "优化操作禁止长按复制" },
{ date: "2026.1.10", content: "添加复制功能" },
{ date: "2026.1.11", content: "优化搜索功能" }
];

let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
let history = JSON.parse(localStorage.getItem('history')) || [];
let showSplash = localStorage.getItem('showSplash') !== 'false';

let version = "1.0.5-Beta";
aboutCon.innerHTML = "V" + version;

const vocabulary = [
{ "word": "a", "pronunciation": "/a/", "part_of_speech": "n. e.", "interpretation": "在；位于；朝；向；以；字母表中的字母", "example": "伙计，向前冲吧！| Ala, to'appo!", "derivative": "ā" },
{ "word": "ā", "pronunciation": "/ang/", "part_of_speech": "n.", "interpretation": "a的鼻音；字母表中的字母", "example": " | ", "derivative": "" },
{ "word": "ac", "pronunciation": "/ai k/", "part_of_speech": "n.", "interpretation": "爱", "example": "爱从不知晓自己的深度，直到别离的时刻。 | Acs umtomé ne tou, appoиétés sépas.", "derivative": "acid, aciq" },
{ "word": "acid", "pronunciation": "/ai k d/", "part_of_speech": "vi.", "interpretation": "爱；热爱；喜爱", "example": "我爱这悠长的旅途，可以从容地想你。 | Cet lasums bin и̂e acid, née naiq tê futué.", "derivative": "ac, aciq" },
{ "word": "aciq", "pronunciation": "/ai k tü/", "part_of_speech": "vt.", "interpretation": "爱；热爱；喜爱", "example": "我爱这悠长的旅途，可以从容地想你。 | и̂e aciq cet lasum, née naiq tê futué.", "derivative": "ac, acid" },
{ "word": "ad", "pronunciation": "/ad/", "part_of_speech": "e.", "interpretation": "正；正在", "example": "", "derivative": "" },
{ "word": "ada", "pronunciation": "/a da/", "part_of_speech": "e.", "interpretation": "正在；", "example": " | ", "derivative": "" },
{ "word": "ah", "pronunciation": "/a he/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ais", "pronunciation": "/ai s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "al", "pronunciation": "/ao/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ala", "pronunciation": "/a la/", "part_of_speech": "v.n.", "interpretation": "同意；允许；让；行", "example": "我不想让花再开一遍，不想让你再来一遍…… | и̂e nê ala cet flauer tê so iecê……", "derivative": "" },
{ "word": "ānǵy", "pronunciation": "/ang gy/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ap", "pronunciation": "/ap/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "appo", "pronunciation": "/a po p/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "appoto", "pronunciation": "/a po tou/", "part_of_speech": "v.", "interpretation": "去；去往；前去", "example": " | ", "derivative": "" },
{ "word": "appoиété", "pronunciation": "/a po zi ti/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ater", "pronunciation": "/a te h/", "part_of_speech": "e.", "interpretation": "另；另外；", "example": " | ", "derivative": "" },
{ "word": "atom", "pronunciation": "/a tou m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "au", "pronunciation": "/aou/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "aum", "pronunciation": "/aou m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "aumō", "pronunciation": "/aou mong/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "auté", "pronunciation": "/aou ti/", "part_of_speech": "e.", "interpretation": "更；更加", "example": "", "derivative": "" },
{ "word": "b", "pronunciation": "/b/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "bara", "pronunciation": "/ba ha/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "beau", "pronunciation": "/bu/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "bi", "pronunciation": "/bi/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "bon", "pronunciation": "/bong/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "bōns", "pronunciation": "/bong s/", "part_of_speech": "v.", "interpretation": "死亡；杀死；去世；离世", "example": "平静面对死亡。 | Féey dóns.", "derivative": "" },
{ "word": "butu", "pronunciation": "/bu tu/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "bulétin", "pronunciation": "/bu li tin/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "bum", "pronunciation": "/bu m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "no" },
{ "word": "buy", "pronunciation": "/bai/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "c", "pronunciation": "/k/ /c/ /s/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "cê", "pronunciation": "/sei/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "cet", "pronunciation": "/sei t/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "cid", "pronunciation": "/si d/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "con", "pronunciation": "/kon/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "contou", "pronunciation": "/kon tong/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "colum", "pronunciation": "/kou lu m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "com", "pronunciation": "/kou m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "cu", "pronunciation": "/ku/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "culon", "pronunciation": "/ku long/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "d", "pronunciation": "/d/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "τ", "pronunciation": "/de/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "dai", "pronunciation": "/dei/", "part_of_speech": "n.", "interpretation": "天；一天", "example": "", "derivative": "daitom" },
{ "word": "daitom", "pronunciation": "/dei tou m/", "part_of_speech": "n.", "interpretation": "天；一天", "example": "", "derivative": "dai" },
{ "word": "de", "pronunciation": "/de/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "dé", "pronunciation": "/di/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "τed", "pronunciation": "/de t/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "dehre", "pronunciation": "/de hou/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "dilid", "pronunciation": "/di li d/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "dilidém", "pronunciation": "/di li di m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "do", "pronunciation": "/dou/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "dom", "pronunciation": "/don m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "don", "pronunciation": "/don/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "dona", "pronunciation": "/dou na/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "e", "pronunciation": "/e/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "ē", "pronunciation": "/eng/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "é", "pronunciation": "/y/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "ê", "pronunciation": "/ei/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "ë", "pronunciation": "/ie/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "eau", "pronunciation": "/ou/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "écris", "pronunciation": "/y ke ri s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "élon", "pronunciation": "/y long/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "équa", "pronunciation": "/y kua/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "era", "pronunciation": "/e ra/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "éro", "pronunciation": "/y ho/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "éros", "pronunciation": "/y hou s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "és", "pronunciation": "/y s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ésy", "pronunciation": "/y si/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ét", "pronunciation": "/y t/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "étab", "pronunciation": "/y ta b/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "étabsino", "pronunciation": "/y ta b si nou/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "été", "pronunciation": "/y ti/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "étu", "pronunciation": "/y tu/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "étucum", "pronunciation": "/y tu cu m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "étut", "pronunciation": "/y tu t/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "f", "pronunciation": "/f/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "fanc", "pronunciation": "/fan si k/", "part_of_speech": "n.", "interpretation": "吃的；食物", "example": "", "derivative": "fancid, fanciq" },
{ "word": "fancid", "pronunciation": "/fan si d/", "part_of_speech": "v.", "interpretation": "吃；食用；进食", "example": "", "derivative": "fanc, fanciq" },
{ "word": "fanciq", "pronunciation": "/fan si k/", "part_of_speech": "v.", "interpretation": "吃；食用；进食", "example": "", "derivative": "fanc, fancid" },
{ "word": "fas", "pronunciation": "/fa s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "fé", "pronunciation": "/fi/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "féey", "pronunciation": "/fi ying/", "part_of_speech": "e.", "interpretation": "平静的；安静的；寂静的；静默的；无声的", "example": "无声胜有声。 | Féey no.", "derivative": "" },
{ "word": "fim", "pronunciation": "/fi m/", "part_of_speech": "n.", "interpretation": "分钟；min", "example": "", "derivative": "fimtom" },
{ "word": "fimtom", "pronunciation": "/fi m tou m/", "part_of_speech": "n.", "interpretation": "分钟；min", "example": "", "derivative": "fim" },
{ "word": "flom", "pronunciation": "/fu lou m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "fo", "pronunciation": "/fou/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "futu", "pronunciation": "/fu tu/", "part_of_speech": "n.", "interpretation": "灵活；自如；轻松；好办；容易", "example": " | ", "derivative": "" },
{ "word": "fol", "pronunciation": "/fo/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "g", "pronunciation": "/c/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "ǵ", "pronunciation": "/g/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "ĝ", "pronunciation": "/ch/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "ĝaq", "pronunciation": "/cha kü/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ǵée", "pronunciation": "/gii/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ǵinih", "pronunciation": "/gi ni h/", "part_of_speech": "e.", "interpretation": "极端的；极度的；偏激的；尖酸刻薄", "example": "", "derivative": "tupék" },
{ "word": "ǵlam", "pronunciation": "/gla m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ǵlom", "pronunciation": "/glo m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ǵum", "pronunciation": "/gen m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "h", "pronunciation": "/h/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "j", "pronunciation": "/h/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "ha", "pronunciation": "/ha/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ja", "pronunciation": "/ha/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "hā", "pronunciation": "/hā/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "hafé", "pronunciation": "/ha fi/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "hau", "pronunciation": "/hao u/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "hay", "pronunciation": "/hai/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "je", "pronunciation": "/he/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "jeno", "pronunciation": "/he no/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "jesum", "pronunciation": "/he su m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "hum", "pronunciation": "/hu m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "hon", "pronunciation": "/hong/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "i", "pronunciation": "/y/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "is", "pronunciation": "/y s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "im̃", "pronunciation": "/i k/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "im̃иam", "pronunciation": "/i k za m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "in", "pronunciation": "/in/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "inm̃", "pronunciation": "/in k/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "б", "pronunciation": "/j/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "бa", "pronunciation": "/ja/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "m̃", "pronunciation": "/k/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "k", "pronunciation": "/k/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "l", "pronunciation": "/l/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "ʜ", "pronunciation": "/l/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "la", "pronunciation": "/la/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "laito", "pronunciation": "/lei tou/", "part_of_speech": "v.", "interpretation": "到；到达；抵达；直到", "example": "", "derivative": "" },
{ "word": "lay", "pronunciation": "/lei/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "les", "pronunciation": "/le s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ʜca", "pronunciation": "/le ka/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "léon", "pronunciation": "/li ong/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "m", "pronunciation": "/m/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "mala", "pronunciation": "/ma la/", "part_of_speech": "n.", "interpretation": "脑袋；头脑；脑子", "example": "", "derivative": "" },
{ "word": "mai", "pronunciation": "/mei/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "man", "pronunciation": "/mong/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "manbeau", "pronunciation": "/mong bu/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "masé", "pronunciation": "/ma si/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "masésu", "pronunciation": "/ma si su/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "māy", "pronunciation": "/mang y/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "māyir", "pronunciation": "/mang yi er/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "men", "pronunciation": "/men/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "mēm", "pronunciation": "/meng/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "mēsy", "pronunciation": "/meng si/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "min", "pronunciation": "/min/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "mool", "pronunciation": "/muo/", "part_of_speech": "n.", "interpretation": "月；月球；月亮", "example": "", "derivative": "" },
{ "word": "motom", "pronunciation": "/mo tou m/", "part_of_speech": "n.", "interpretation": "时间月；月份", "example": "", "derivative": "" },
{ "word": "mu", "pronunciation": "/mu/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "n", "pronunciation": "/n/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "na", "pronunciation": "/na/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "nā", "pronunciation": "/nang/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "nai", "pronunciation": "/nai/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "naiq", "pronunciation": "/nai kü/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "nāq", "pronunciation": "/nang kü/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "née", "pronunciation": "/nii/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "nê", "pronunciation": "/nei/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "nem", "pronunciation": "/ne m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "no", "pronunciation": "/no/", "part_of_speech": "v.e.n.", "interpretation": "没有；消失（的）；隐秘的", "example": " | ", "derivative": "bum" },
{ "word": "nouve", "pronunciation": "/nou vu/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "nu", "pronunciation": "/nu/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "nuê", "pronunciation": "/nu ei/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "nuêlém", "pronunciation": "/nu ei li m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "num", "pronunciation": "/nu m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "numte", "pronunciation": "/nu m te/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "o", "pronunciation": "/o/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "ō", "pronunciation": "/ong/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "onion", "pronunciation": "/ao ni ong/", "part_of_speech": "e.", "interpretation": "仅仅；只是；只有", "example": " | ", "derivative": "" },
{ "word": "oto", "pronunciation": "/o tou/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "otoétom", "pronunciation": "/o tou ei tom/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ous", "pronunciation": "/ao s/", "part_of_speech": "n.", "interpretation": "时；小时；一个点；一个钟头；h", "example": "", "derivative": "oustom" },
{ "word": "oustom", "pronunciation": "/ao s tou m/", "part_of_speech": "n.", "interpretation": "时；小时；一个点；一个钟头；h", "example": "", "derivative": "ous" },
{ "word": "out", "pronunciation": "/ao t/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "p", "pronunciation": "/p/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "pa", "pronunciation": "/pa/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "parce", "pronunciation": "/pa h s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "pit", "pronunciation": "/pi t/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "plus", "pronunciation": "/plu s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "poloste", "pronunciation": "/plo st/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "porste", "pronunciation": "/po h st/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "q", "pronunciation": "/q/ /kü/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "qa", "pronunciation": "/qa/ /cha/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "qatom", "pronunciation": "/cha tom/", "part_of_speech": "n.", "interpretation": "周；星期；七天", "example": "", "derivative": "" },
{ "word": "qis", "pronunciation": "/qi s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "r", "pronunciation": "/r/ /h/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "rā", "pronunciation": "/rang/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "re", "pronunciation": "/he/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "ren", "pronunciation": "/ren/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "renem", "pronunciation": "/re ne m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "renes", "pronunciation": "/re ne s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "réni", "pronunciation": "/rei ni/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "renio", "pronunciation": "/rei l/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "renis", "pronunciation": "/rei nis/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "rca", "pronunciation": "/y ka/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "rcas", "pronunciation": "/y ka s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "s", "pronunciation": "/s/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "α", "pronunciation": "/s/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "α̂", "pronunciation": "/sh/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "sa", "pronunciation": "/sa/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "αa", "pronunciation": "/sa/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sais", "pronunciation": "/sai s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "salé", "pronunciation": "/sa li/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "αca", "pronunciation": "/s ka/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sé", "pronunciation": "/si/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sec", "pronunciation": "/sai k/", "part_of_speech": "n.", "interpretation": "秒；s", "example": "", "derivative": "sectom" },
{ "word": "sectom", "pronunciation": "/sai k tou m/", "part_of_speech": "n.", "interpretation": "秒；s", "example": "", "derivative": "sec" },
{ "word": "sépas", "pronunciation": "/si pa s/", "part_of_speech": "v.", "interpretation": "离别；离开；远离；出去不回；出走", "example": "离别一瞬间，才知道珍惜。 | Onion sépas tê, alsum tenαen.", "derivative": "" },
{ "word": "séry", "pronunciation": "/si ri/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "si", "pronunciation": "/si/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "simp", "pronunciation": "/sim pe/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "simpʜéaα̂", "pronunciation": "/si m pli ya sh/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "simpléas", "pronunciation": "/si m pli ash/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "simploh", "pronunciation": "/si m plou sh/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sino", "pronunciation": "/si no/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "so", "pronunciation": "/sou/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sonc", "pronunciation": "/son k/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sula", "pronunciation": "/su la/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sularém", "pronunciation": "/su la rei m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sum", "pronunciation": "/su m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sumu", "pronunciation": "/su mu/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sumblas", "pronunciation": "/su m bla s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sumblasmo", "pronunciation": "/su bla s mo/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sumbucu", "pronunciation": "/su m bu ku/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sumbury", "pronunciation": "/su m bu rei/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sumute", "pronunciation": "/su m te/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "sumplait", "pronunciation": "/su m plei t/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "suné", "pronunciation": "/su ni/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "swallo", "pronunciation": "/s wa lou/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "t", "pronunciation": "/t/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "tab", "pronunciation": "/ta b/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "te", "pronunciation": "/te/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "tê", "pronunciation": "/tei/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "tenα", "pronunciation": "/ten sh/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "tou", "pronunciation": "/tou/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "toulo", "pronunciation": "/tou lou/", "part_of_speech": "v.", "interpretation": "听道；聆听", "example": "", "derivative": "" },
{ "word": "tom", "pronunciation": "/tou m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "tup", "pronunciation": "/tu p/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "tupék", "pronunciation": "/tu pi k/", "part_of_speech": "e.", "interpretation": "有棱角的；扎手的的；尖锐的；犀利的；极端的；难处理的；突发的；令人措不及防的；严峻的", "example": "每个人都摆出比实际上严峻的样子，似乎人人都怕让自己的感情很快地外露有损自己的尊严。 | ĝaq nāq tupék simi, walo têsmen mai parce bin bōns ac de tōsy têmai.", "derivative": "ǵinih" },
{ "word": "u", "pronunciation": "/u/ /yü/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "um", "pronunciation": "/yü m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "umtom", "pronunciation": "/yü m tou m/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "v", "pronunciation": "/v/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "va", "pronunciation": "/va/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "val", "pronunciation": "/vao/", "part_of_speech": "e.", "interpretation": "将全部；会全都；将全都；会全部", "example": "嘿你知道的，总会一无所有的！ | Hey, Tê contou ca val bum.", "derivative": "" },
{ "word": "van", "pronunciation": "/van/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "voulon", "pronunciation": "/vu long/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "w", "pronunciation": "/w/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "walo", "pronunciation": "/wa lou/", "part_of_speech": "v.", "interpretation": "担心；担忧；害怕；恐惧", "example": " | ", "derivative": "" },
{ "word": "т", "pronunciation": "/w/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "тa", "pronunciation": "/wa/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "тud", "pronunciation": "/wu d/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "y", "pronunciation": "/y/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "yā", "pronunciation": "/yang/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "yél", "pronunciation": "/y o/", "part_of_speech": "n.", "interpretation": "年；周年", "example": "", "derivative": "yétom" },
{ "word": "yétom", "pronunciation": "/y o tom/", "part_of_speech": "n.", "interpretation": "年；周年", "example": "", "derivative": "yél" },
{ "word": "и", "pronunciation": "/z/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "и̂", "pronunciation": "/zh/", "part_of_speech": "", "interpretation": "", "example": "", "derivative": "" },
{ "word": "и̂as", "pronunciation": "/zha s/", "part_of_speech": "n.", "interpretation": "世纪；百年", "example": " | ", "derivative": "и̂astom" },
{ "word": "и̂astom", "pronunciation": "/zha s tou m/", "part_of_speech": "n.", "interpretation": "世纪；百年", "example": " | ", "derivative": "и̂as" },
{ "word": "и̂e", "pronunciation": "/zhe/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "и̂ero", "pronunciation": "/ zhe ho/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "и̂eros", "pronunciation": "/zhe ho s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "и̂es", "pronunciation": "/zhe s/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "иenq", "pronunciation": "/zen kü/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" },
{ "word": "иu", "pronunciation": "/zu/", "part_of_speech": "", "interpretation": "", "example": " | ", "derivative": "" }
];


// 夜间模式功能
const darkModeToggle = document.getElementById('dark-mode-toggle');
let isDarkMode = localStorage.getItem('darkMode') === 'true';

function setDarkMode(enabled) {
if (enabled) {
document.body.classList.add('dark-mode');
} else {
document.body.classList.remove('dark-mode');
}
darkModeToggle.checked = enabled;
localStorage.setItem('darkMode', enabled);
}
setDarkMode(isDarkMode);
darkModeToggle.addEventListener('change', function() {
setDarkMode(this.checked);
});

// 学习区
const learnButton = document.getElementById('learn-button');
const learnOverlay = document.getElementById('learn-overlay');
const closeLearn = document.getElementById('close-learn');

learnButton.addEventListener('click', function () {
sidebar.classList.remove('active');
overlay.classList.remove('active');
learnOverlay.classList.add('active');
});
closeLearn.addEventListener('click', function () {
learnOverlay.classList.remove('active');
});

// 学习区导航栏交互
const navItems = document.querySelectorAll('.learn-nav-item');
const sections = document.querySelectorAll('.section');

function scrollToSection(targetId) {
const target = document.getElementById(targetId);
if (target) {
const offset = target.offsetTop - 60;
document.querySelector('.learn-content-wrapper').scrollTop = offset;
}
}
navItems.forEach(item => {
item.addEventListener('click', function () {
// navItems.forEach(i => i.classList.remove('active'));
// this.classList.add('active');
scrollToSection(this.getAttribute('data-target'));
});
});

// 学习区滚动监听高亮导航
document.querySelector('.learn-content-wrapper').addEventListener('scroll', function () {
let current = '';
sections.forEach(section => {
const rect = section.getBoundingClientRect();
if (rect.top <= 70) {
current = section.id;
}
});
navItems.forEach(item => {
item.classList.remove('active');
if (item.getAttribute('data-target') === current) {
item.classList.add('active');
}
});
});

// 添加字符标准化函数
function normalizeText(text) {
return text
// 将各种变体统一映射到基础字母
.replace(/[éēëê]/g, 'e')
.replace(/[āα]/g, 'a')
.replace(/[ō]/g, 'o')
.replace(/[ī]/g, 'i')
.replace(/[h]/g, 'j')
.replace(/[j]/g, 'h')
.replace(/[r]/g, 'h')
.replace(/[ʜ]/g, 'l')
.replace(/[б]/g, 'j')
.replace(/[ǵ]/g, 'g')
.replace(/[m̃]/g, 'm')
.replace(/[и]/g, 'z')
.replace(/[τ]/g, 'd')

// 删除所有上标符号
.replace(/[̂̌̄́̀̂]/g, '')
// 转换为小写
.toLowerCase();
}

searchInput.addEventListener('input', function () {
const query = searchInput.value.toLowerCase();
const normalizedQuery = normalizeText(query);
if (query.trim() === '') {
displayHistoryInSearchResults();
} else {
const results = vocabulary.filter(word => {
const normalizedWord = normalizeText(word.word);
const normalizedInterpretation = normalizeText(word.interpretation);
return normalizedWord.startsWith(normalizedQuery) ||
normalizedInterpretation.includes(normalizedQuery) ||
normalizedWord.includes(normalizedQuery) ||
normalizedInterpretation.includes(normalizedQuery);
});
displaySearchResults(results);
}
});

searchInput.addEventListener('focus', function () {
if (searchInput.value.trim() === '') {
displayHistoryInSearchResults();
} else {
searchResults.classList.add('active');
}
});

searchInput.addEventListener('blur', function () {
setTimeout(() => {
if (!searchResults.contains(document.activeElement)) {
searchResults.classList.remove('active');
}
}, 100);
});

function displayHistoryInSearchResults() {
const resultsList = searchResults.querySelector('ul');
resultsList.innerHTML = '';
searchResults.classList.add('active');
const header = document.createElement('li');
header.textContent = '历史记录';
header.style.fontWeight = 'bold';
header.style.marginBottom = '10px';
resultsList.appendChild(header);
noResults.style.display = 'none';

history.slice(0, 10).forEach(word => {
const li = document.createElement('li');
li.textContent = `${word.word} - ${word.interpretation}`;
li.addEventListener('click', () => {
displayWordDetails(word);
searchResults.classList.remove('active');
});
resultsList.appendChild(li);
});
}

function displaySearchResults(results) {
    const resultsList = searchResults.querySelector('ul');
    resultsList.innerHTML = '';

    const rawQuery = searchInput.value.trim();
    const normQuery = normalizeText(rawQuery);

    /* 1) 完全匹配（原始拼写） */
    const fullRaw = results.filter(w => w.word === rawQuery);
    /* 2) 完全匹配（标准化后） */
    const fullNorm = results.filter(w => normalizeText(w.word) === normQuery && !fullRaw.includes(w));
    /* 3) 开头匹配——仅原始拼写开头 */
    const startRaw = results.filter(w =>
        w.word.startsWith(rawQuery) &&
        ![...fullRaw, ...fullNorm].includes(w)
    );
    /* 4) 开头匹配（标准化）放在更后 */
    const startNorm = results.filter(w =>
        normalizeText(w.word).startsWith(normQuery) &&
        ![...fullRaw, ...fullNorm, ...startRaw].includes(w)
    );
    /* 5) 其余模糊 */
    const fuzzy = results.filter(w =>
        ![...fullRaw, ...fullNorm, ...startRaw, ...startNorm].includes(w)
    );

    const ordered = [...fullRaw, ...fullNorm, ...startRaw, ...startNorm, ...fuzzy];

    const header = document.createElement('li');
    header.textContent = `搜索匹配到 ${ordered.length} 个单词`;
    header.style.fontWeight = 'bold';
    header.style.marginBottom = '10px';
    resultsList.appendChild(header);

    if (ordered.length === 0) {
        noResults.style.display = 'block';
        return;
    }
    searchResults.classList.add('active');
    noResults.style.display = 'none';

    ordered.forEach(result => {
        const li = document.createElement('li');
        const wordHighlight = result.word.replace(
            new RegExp(`(${rawQuery})`, 'gi'),
            '<span class="bold">$1</span>'
        );
        const interpretationHighlight = result.interpretation.replace(
            new RegExp(`(${rawQuery})`, 'gi'),
            '<span class="bold">$1</span>'
        );

        li.innerHTML = `
        <div style="display: flex; justify-content: space-between;">
            <span>${wordHighlight}</span>
            <span style="color: #888; margin-left: 10px;">
                ${result.part_of_speech} - ${interpretationHighlight}
            </span>
        </div>`;
        li._word = result;
        li.addEventListener('click', () => {
            displayWordDetails(result);
            searchResults.classList.remove('active');
        });
        resultsList.appendChild(li);
    });
}



function displayWordDetails(word) {
wordDisplay.style.display = 'block';
document.getElementById('word').textContent = word.word;
document.getElementById('pronunciation').textContent = `音标: ${word.pronunciation}`;
document.getElementById('part-of-speech').textContent = `词性: ${word.part_of_speech}`;
document.getElementById('interpretation').textContent = `释义: ${word.interpretation}`;

const exampleElement = document.getElementById('example');
exampleElement.innerHTML = '例句:';
const exampleSentences = word.example.split('|');
exampleSentences.forEach(sentence => {
const p = document.createElement('p');
p.textContent = sentence.trim();
p.style.textIndent = '2em';
exampleElement.appendChild(p);
});

const derivativeElement = document.getElementById('derivative-word');
derivativeElement.innerHTML = '';
if (word.derivative) {
const derivatives = word.derivative.split(',').map(d => d.trim());
derivatives.forEach(der => {
const span = document.createElement('span');
span.textContent = der;
span.style.cursor = 'pointer';
span.style.marginRight = '10px';
span.addEventListener('click', () => {
const results = vocabulary.filter(w => w.word === der);
if (results.length > 0) {
displayWordDetails(results[0]);
}
});
derivativeElement.appendChild(span);
});
}

const isFavorite = favorites.some(fav => fav.word === word.word);
favoriteButton.textContent = isFavorite ? '★' : '☆';
favoriteButton.dataset.word = JSON.stringify(word);

history = [word, ...history.filter(h => h.word !== word.word)];
localStorage.setItem('history', JSON.stringify(history));
displayHistory();
}

favoriteButton.addEventListener('click', function () {
const word = JSON.parse(favoriteButton.dataset.word);
const isFavorite = favorites.some(fav => fav.word === word.word);

if (!isFavorite) {
favorites.push(word);
const li = document.createElement('li');
li.innerHTML = `
<span>${word.word}</span>
<button class="remove-favorite">—</button>
`;
li.querySelector('.remove-favorite').addEventListener('click', () => {
favorites = favorites.filter(fav => fav.word !== word.word);
favoritesList.removeChild(li);
localStorage.setItem('favorites', JSON.stringify(favorites));
updateFavoriteButton(word.word);
});
li.querySelector('span').addEventListener('click', () => {
displayWordDetails(word);
sidebar.classList.remove('active');
overlay.classList.remove('active');
});
favoritesList.appendChild(li);
localStorage.setItem('favorites', JSON.stringify(favorites));
} else {
favorites = favorites.filter(fav => fav.word !== word.word);
localStorage.setItem('favorites', JSON.stringify(favorites));
const favoriteItem = document.querySelector(`.favorites-list span:contains("${word.word}")`);
if (favoriteItem) {
favoriteItem.parentNode.remove();
}
updateFavoriteButton(word.word);
}

favoriteButton.textContent = isFavorite ? '☆' : '★';
});

function updateFavoriteButton(word) {
const isFavorite = favorites.some(fav => fav.word === word);
favoriteButton.textContent = isFavorite ? '★' : '☆';
}

function displayFavorites() {
favoritesList.innerHTML = '';
favorites.forEach(word => {
const li = document.createElement('li');
li.innerHTML = `
<span>${word.word}</span>
<button class="remove-favorite">—</button>
`;
li.querySelector('.remove-favorite').addEventListener('click', () => {
favorites = favorites.filter(fav => fav.word !== word.word);
favoritesList.removeChild(li);
localStorage.setItem('favorites', JSON.stringify(favorites));
updateFavoriteButton(word.word);
});
li.querySelector('span').addEventListener('click', () => {
displayWordDetails(word);
sidebar.classList.remove('active');
overlay.classList.remove('active');
});
favoritesList.appendChild(li);
});
}

function displayHistory() {
historyList.innerHTML = '';
history.slice(0, 20).forEach(word => {
const li = document.createElement('li');
li.innerHTML = `
<span>${word.word} - ${word.interpretation}</span>
<button class="remove-history">—</button>
`;
li.querySelector('.remove-history').addEventListener('click', () => {
history = history.filter(h => h.word !== word.word);
historyList.removeChild(li);
localStorage.setItem('history', JSON.stringify(history));
});
li.querySelector('span').addEventListener('click', () => {
displayWordDetails(word);
sidebar.classList.remove('active');
overlay.classList.remove('active');
});
historyList.appendChild(li);
});
}

toggleSidebar.addEventListener('click', function () {
sidebar.classList.toggle('active');
overlay.classList.toggle('active');
});

overlay.addEventListener('click', function () {
sidebar.classList.remove('active');
overlay.classList.remove('active');
});

aboutButton.addEventListener('click', function () {
sidebar.classList.remove('active');
overlay.classList.remove('active');
aboutOverlay.classList.add('active');
});

closeAbout.addEventListener('click', function () {
aboutOverlay.classList.remove('active');
});

noteButton.addEventListener('click', function () {
sidebar.classList.remove('active');
overlay.classList.remove('active');
noteOverlay.classList.add('active');
});

closeNote.addEventListener('click', function () {
noteOverlay.classList.remove('active');
});

// 更新内容页面功能
const viewUpdatesBtn = document.getElementById('view-updates');
const updatesOverlay = document.getElementById('updates-overlay');
const closeUpdates = document.getElementById('close-updates');
const updatesList = document.getElementById('updates-list');

viewUpdatesBtn.addEventListener('click', function() {
aboutOverlay.classList.remove('active');
updatesOverlay.classList.add('active');

updatesList.innerHTML = '';
Updated_Context.forEach(update => {
const updateItem = document.createElement('div');
updateItem.innerHTML = `
<h3>${update.date}</h3>
<p>${update.content}</p>
`;
updatesList.appendChild(updateItem);
});
});

closeUpdates.addEventListener('click', function() {
updatesOverlay.classList.remove('active');
});

displayFavorites();
displayHistory();

let currentQuestionIndex = 0;
let mistakes = [];
let reviewingMistakes = false;
let question_amount = 3;

function generateOptions(correctAnswer) {
const options = [correctAnswer];
const otherWords = vocabulary.filter(word => word.interpretation !== correctAnswer);
const randomOptions = otherWords.map(word => `${word.part_of_speech} - ${word.interpretation}`);
while (options.length < question_amount) {
const randomIndex = Math.floor(Math.random() * randomOptions.length);
const randomOption = randomOptions[randomIndex];
if (!options.includes(randomOption)) {
options.push(randomOption);
}
}
return options.sort(() => Math.random() - 0.5);
}

function displayQuestion() {
const questionElement = document.getElementById('question');
const optionsElement = document.getElementById('options');
const resultElement = document.getElementById('result');

resultElement.textContent = '';
optionsElement.innerHTML = '';

let currentWord;
if (reviewingMistakes && mistakes.length > 0) {
currentWord = vocabulary[mistakes[currentQuestionIndex]];
} else {
currentWord = vocabulary[currentQuestionIndex];
}

const options = generateOptions(`${currentWord.part_of_speech} - ${currentWord.interpretation}`);

questionElement.textContent = `第 ${currentQuestionIndex + 1} 题：${currentWord.word} 的释义是？`;
options.forEach(option => {
const button = document.createElement('button');
button.textContent = option;
button.classList.add('option');
button.addEventListener('click', () => {
optionsElement.querySelector('.selected')?.classList.remove('selected');
button.classList.add('selected');
});
optionsElement.appendChild(button);
});
}

function checkAnswer() {
const selectedOption = document.querySelector('.option.selected');
if (!selectedOption) {
return;
}

const correctAnswer = reviewingMistakes ? `${vocabulary[mistakes[currentQuestionIndex]].part_of_speech} - ${vocabulary[mistakes[currentQuestionIndex]].interpretation}` : `${vocabulary[currentQuestionIndex].part_of_speech} - ${vocabulary[currentQuestionIndex].interpretation}`;
const resultElement = document.getElementById('result');
const options = document.querySelectorAll('.option');

options.forEach(option => {
if (option.textContent === correctAnswer) {
option.style.backgroundColor = '#c8e6c9';
} else if (option.classList.contains('selected')) {
option.style.backgroundColor = '#ffcdd2';
}
});

if (selectedOption.textContent === correctAnswer) {
resultElement.textContent = '✓ 正确！';
resultElement.style.color = '#2e7d32';
if (reviewingMistakes) {
mistakes.splice(currentQuestionIndex, 1);
if (mistakes.length === 0) {
reviewingMistakes = false;
currentQuestionIndex = 0;
} else {
currentQuestionIndex = Math.floor(Math.random() * mistakes.length);
}
} else {
currentQuestionIndex = (currentQuestionIndex + 1) % vocabulary.length;
}
setTimeout(displayQuestion, 1000);
} else {
resultElement.textContent = `✗ 错误！正确答案是：${correctAnswer}`;
resultElement.style.color = '#d32f2f';
if (!reviewingMistakes) {
if (!mistakes.includes(currentQuestionIndex)) {
mistakes.push(currentQuestionIndex);
}
}
setTimeout(displayQuestion, 2000);
}
}

displayQuestion();

splashToggle.checked = showSplash;

splashToggle.addEventListener('change', function () {
showSplash = splashToggle.checked;
localStorage.setItem('showSplash', showSplash);
if (!showSplash) {
splashScreen.style.display = "none";
} else {
displaySplashWord();
updateDate();
fadeOutSplashScreen();
}
});

function getRandomWord() {
const randomIndex = Math.floor(Math.random() * vocabulary.length);
return vocabulary[randomIndex];
}

function displaySplashWord() {
let randomWord = getRandomWord();
while (!randomWord.example.trim()) {
randomWord = getRandomWord();
}
splashWord.textContent = randomWord.word;
splashDefinition.textContent = randomWord.interpretation;
splashExample.innerHTML = randomWord.example.split('|').join('<br>');
}

function updateDate() {
const now = new Date();
const month = String(now.getMonth() + 1).padStart(2, '0');
const day = String(now.getDate()).padStart(2, '0');
const year = now.getFullYear();
const weekDays = ['Sun.', 'Mon.', 'Tue.', 'Wed.', 'Thu.', 'Fri.', 'Sat.'];
const week = weekDays[now.getDay()];

monthElement.textContent = month;
yearElement.textContent = year;
dayElement.textContent = day;
weekElement.textContent = week;
}

function fadeOutSplashScreen() {
setTimeout(() => {
splashScreen.classList.add('active');
}, 5000);
setTimeout(() => {
splashScreen.style.display = "none";
}, 6000);
}

if (showSplash) {
displaySplashWord();
updateDate();
setTimeout(() => {
document.querySelector('.date-left').classList.add('animate-in');
document.querySelector('.date-right').classList.add('animate-in');
}, 100);
fadeOutSplashScreen();
} else {
splashScreen.style.display = "none";
}

async function copyWordContent() {
const wordElement = document.getElementById('word');
const content = wordElement.textContent.trim();
const button = event.target.closest('.copy-btn');

// 如果内容是"-"，则不复制
if (content === '-') {
button.style.backgroundColor = '#f44336';
button.disabled = true;
setTimeout(() => {
button.style.backgroundColor = '';
button.disabled = false;
}, 1000);
return;
}

try {
// 使用现代的 Clipboard API
await navigator.clipboard.writeText(content);
// 显示复制成功状态
button.classList.add('copied');
// 2秒后恢复原状
setTimeout(() => {
button.classList.remove('copied');
}, 2000);
} catch (err) {
console.error('复制失败:', err);
// 降级方案
const textArea = document.createElement('textarea');
textArea.value = content;
textArea.style.position = 'fixed';
textArea.style.left = '-999999px';
document.body.appendChild(textArea);
textArea.focus();
textArea.select();

try {
document.execCommand('copy');
button.classList.add('copied');
setTimeout(() => {
button.classList.remove('copied');
}, 2000);
} catch (fallbackErr) {
button.style.backgroundColor = '#f44336';
setTimeout(() => {
button.style.backgroundColor = '';
}, 1000);
}
document.body.removeChild(textArea);
}
}

// 每日单词功能
const dailyWordDisplay = document.getElementById('daily-word-display');
const dailyFavoriteButton = document.getElementById('daily-favorite-button');
const dailyWordEl = document.getElementById('daily-word');
const dailyPronunciationEl = document.getElementById('daily-pronunciation');
const dailyInterpretationEl = document.getElementById('daily-interpretation');
const dailyExampleEl = document.getElementById('daily-example');

function getDailyWord() {
const today = new Date().toDateString();
const savedDaily = localStorage.getItem('dailyWord');
const savedDate = localStorage.getItem('dailyWordDate');

if (savedDaily && savedDate === today) {
return JSON.parse(savedDaily);
} else {
let word;
do {
word = getRandomWord();
} while (!word.example.trim());
localStorage.setItem('dailyWord', JSON.stringify(word));
localStorage.setItem('dailyWordDate', today);
return word;
}
}

function displayDailyWord() {
const word = getDailyWord();
dailyWordEl.textContent = word.word;
dailyPronunciationEl.textContent = `音标: ${word.pronunciation}`;
dailyInterpretationEl.textContent = `释义: ${word.interpretation}`;
dailyExampleEl.innerHTML = `例句: ${word.example.split('|').join('<br>')}`;

const isFavorite = favorites.some(fav => fav.word === word.word);
dailyFavoriteButton.textContent = isFavorite ? '★' : '☆';
dailyFavoriteButton.dataset.word = JSON.stringify(word);
}

dailyFavoriteButton.addEventListener('click', function () {
const word = JSON.parse(dailyFavoriteButton.dataset.word);
const isFavorite = favorites.some(fav => fav.word === word.word);

if (!isFavorite) {
favorites.push(word);
localStorage.setItem('favorites', JSON.stringify(favorites));
displayFavorites();
displayFavoriteCards();
} else {
favorites = favorites.filter(fav => fav.word !== word.word);
localStorage.setItem('favorites', JSON.stringify(favorites));
displayFavorites();
displayFavoriteCards();
}

dailyFavoriteButton.textContent = isFavorite ? '☆' : '★';
});

// 收藏卡片页面
const favoritesTitle = document.getElementById('favorites-title');
const favoritesOverlay = document.getElementById('favorites-overlay');
const closeFavorites = document.getElementById('close-favorites');
const favoritesCards = document.getElementById('favorites-cards');

favoritesTitle.addEventListener('click', function () {
sidebar.classList.remove('active');
overlay.classList.remove('active');
favoritesOverlay.classList.add('active');
displayFavoriteCards();
});

closeFavorites.addEventListener('click', function () {
favoritesOverlay.classList.remove('active');
});

function displayFavoriteCards() {
favoritesCards.innerHTML = '';
if (favorites.length === 0) {
favoritesCards.innerHTML = '<p style="text-align:center; color:#888;">暂无收藏单词</p>';
return;
}
favorites.forEach(word => {
const card = document.createElement('div');
card.className = 'favorite-card';
card.innerHTML = `
<button class="card-favorite-btn" data-word="${word.word}">×</button>
<h3>${word.word}</h3>
<p class="card-pronunciation">音标: ${word.pronunciation}</p>
<p class="card-part-of-speech">词性: ${word.part_of_speech}</p>
<p class="card-interpretation">释义: ${word.interpretation}</p>
${word.example ? `<p class="card-example">例句: ${word.example.split('|').join('<br>')}</p>` : ''}
`;
card.querySelector('.card-favorite-btn').addEventListener('click', function(e) {
e.stopPropagation();
const wordToRemove = this.dataset.word;
favorites = favorites.filter(fav => fav.word !== wordToRemove);
localStorage.setItem('favorites', JSON.stringify(favorites));
displayFavorites();
displayFavoriteCards();
updateDailyFavoriteButton();
});
favoritesCards.appendChild(card);
});
}

function updateDailyFavoriteButton() {
const word = getDailyWord();
const isFavorite = favorites.some(fav => fav.word === word.word);
dailyFavoriteButton.textContent = isFavorite ? '★' : '☆';
}

// 设置页面
const settingsButton = document.getElementById('settings-button');
const settingsOverlay = document.getElementById('settings-overlay');
const closeSettings = document.getElementById('close-settings');
const showGameToggle = document.getElementById('show-game-toggle');
const showDailyToggle = document.getElementById('show-daily-toggle');

settingsButton.addEventListener('click', function () {
sidebar.classList.remove('active');
overlay.classList.remove('active');
settingsOverlay.classList.add('active');
});

closeSettings.addEventListener('click', function () {
settingsOverlay.classList.remove('active');
});

// 初始化设置
let showGame = localStorage.getItem('showGame') !== 'false';
let showDaily = localStorage.getItem('showDaily') !== 'false';

showGameToggle.checked = showGame;
showDailyToggle.checked = showDaily;

gameDisplay.style.display = showGame ? 'block' : 'none';
dailyWordDisplay.style.display = showDaily ? 'block' : 'none';

showGameToggle.addEventListener('change', function () {
showGame = this.checked;
localStorage.setItem('showGame', showGame);
gameDisplay.style.display = showGame ? 'block' : 'none';
});

showDailyToggle.addEventListener('change', function () {
showDaily = this.checked;
localStorage.setItem('showDaily', showDaily);
dailyWordDisplay.style.display = showDaily ? 'block' : 'none';
});

// 初始化每日单词
displayDailyWord();

//检测系统夜间模式
/* ---------- 夜间模式：开关优先 + 系统监测为辅 ---------- */
(function () {
const STORAGE_KEY = 'darkMode'; // 保存开关状态
const LOCK_KEY = 'darkModeLocked'; // 是否已手动锁定
const darkModeToggle = document.getElementById('dark-mode-toggle');

/* 工具：设置 DOM 主题 + 开关状态 */
function applyDark(enabled) {
document.body.classList.toggle('dark-mode', enabled);
if (darkModeToggle) darkModeToggle.checked = enabled;
localStorage.setItem(STORAGE_KEY, enabled);
}

/* 首次进入 */
function init() {
const locked = localStorage.getItem(LOCK_KEY) === 'true';
if (locked) {
// 用户曾经手动设置过，完全听开关
const saved = localStorage.getItem(STORAGE_KEY) === 'true';
applyDark(saved);
} else {
// 从未手动设置 → 以系统主题为初始值，并写入锁定
const systemDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
applyDark(systemDark);
localStorage.setItem(LOCK_KEY, 'true'); // 锁定，以后不再被系统覆盖
}
}

/* 手动开关事件：锁定模式立即生效 */
if (darkModeToggle) {
darkModeToggle.addEventListener('change', () => {
const checked = darkModeToggle.checked;
applyDark(checked);
localStorage.setItem(LOCK_KEY, 'true'); // 只要手动拨过就永久锁定
});
}

/* 系统变化监听：仅“未锁定”阶段才跟随（实际已被 init 锁定，保险用） */
if (window.matchMedia) {
window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
if (localStorage.getItem(LOCK_KEY) !== 'true') {
applyDark(e.matches);
localStorage.setItem(LOCK_KEY, 'true');
}
});
}

init(); // 启动
})();

/* ---------- 回车直接搜索：优先完全匹配，否则用结果列表第一条 ---------- */
searchInput.addEventListener('keydown', e => {
if (e.key !== 'Enter') return;
e.preventDefault();

const key = searchInput.value.trim();
if (!key) return; // 空输入直接忽略

// 标准化搜索词
const normalizedKey = normalizeText(key);

// 优先精确匹配（也使用标准化后的结果）
let target = vocabulary.find(item => 
normalizeText(item.word) === normalizedKey
);

if (!target) {
// 精确未命中，且结果面板已展开且有真实条目，则拿第一条
const firstReal = searchResults.querySelector('ul li:not(.no-results):not([style*="font-weight:bold"])');
if (firstReal && firstReal._word) { // 之前绑定过 _word 数据
target = firstReal._word;
}
}

if (target) {
displayWordDetails(target); // 展开详情
searchResults.classList.remove('active'); // 关闭面板
}
/* 仍无匹配则什么都不做，用户继续输入 */
});


</script>

</html>